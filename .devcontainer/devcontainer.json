// .devcontainer/devcontainer.json
{
  "name": "Flutter CI parity (Flutter 3.24.0)",
  "image": "docker.io/cirrusci/flutter:3.24.0",

  // match the public Actions runner HW spec (4 vCPU, 16 GiB)
  "hostRequirements": {
    "cpus": 4,
    "memory": "16gb",
    "storage": "32gb"
  },

  "features": {
    // Exactly what your workflow uses
    "ghcr.io/devcontainers/features/java:1": { "version": "17" },
    "ghcr.io/devcontainers/features/android-sdk:1": {
      "version": "latest",
      "buildToolsVersion": "34.0.0",
      "platformVersion": "34",
      "cmake": "true"
    }
  },

  "containerEnv": {
    "ANDROID_HOME": "/opt/android-sdk",
    "ANDROID_SDK_ROOT": "/opt/android-sdk",
    "JAVA_HOME": "/usr/lib/jvm/ms-jdk-17-linux-amd64"
  },

  // warm caches & accept licences once
  "postCreateCommand": [
    "yes | sdkmanager --licenses",
    "flutter doctor -v"
  ]
}
